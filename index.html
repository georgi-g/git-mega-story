<h1>Look there, a git-mega-story!</h1>
<style type="text/css">
	circle {stroke-width: 2;transition: r 200ms}
	circle:hover, rect:hover + circle, circle.commitHover {r: 9;}
	path {stroke-width: 1; transition: stroke-width 200ms}
	.first-commit-path {stroke-width: 2;}
	path:hover {stroke-width: 4;}
	text {font-family: Arial, Helvetica, sans-serif}
	.commit_g > g {visibility: hidden;opacity: 0;transition: opacity 200ms, visibility 200ms}
	g.show_group {visibility: visible;opacity: 1}
	g.show_group_click {visibility: visible;opacity: 1}
	.show_group_click > rect {stroke-width:2;}
</style>
<svg width="4000" height="280">

	<path class="first-commit-path" d="M 20, 20 L 20, 60 " fill="none" stroke="#b23333"/>
	<path d="M 20, 20 Q 55, 30, 55, 60 L 55, 60 " stroke-dasharray="4 1" fill="none" stroke="#49b233"/>
	<path d="M 20, 20 Q 35, 27, 55, 27 L 55, 27 Q 90, 27, 90, 60 L 90, 100 " stroke-dasharray="4 1" fill="none" stroke="#335fb2"/>
	<path class="first-commit-path" d="M 20, 60 L 20, 180 " fill="none" stroke="#b23333"/>
	<path class="first-commit-path" d="M 55, 60 L 55, 140 " fill="none" stroke="#49b233"/>
	<path d="M 90, 100 Q 55, 110, 55, 140 L 55, 140 " stroke-dasharray="4 1" fill="none" stroke="#49b233"/>
	<path class="first-commit-path" d="M 90, 100 L 90, 140 " fill="none" stroke="#335fb2"/>
	<path class="first-commit-path" d="M 55, 140 L 55, 140 Q 55, 162, 37, 165 T 20, 180 " fill="none" stroke="#49b233"/>
	<path class="first-commit-path" d="M 90, 140 L 90, 140 Q 90, 162, 72, 162 L 72, 162 Q 55, 162, 37, 165 T 20, 180 " fill="none" stroke="#335fb2"/>
	<path class="first-commit-path" d="M 20, 180 L 20, 220 " fill="none" stroke="#b23333"/>
	<circle class="c800831f" cx="20" cy="20" r="7" fill="#ff4a4a" stroke="#000000"/>
<g class="commit_branches">
	<g>
<rect class="rect_branch" rx="5" ry="5" x="110" y="20" width="20" height="20" fill="#eeffe4" stroke="#307f00"/>
<text class="text_branch" x="110" y="20" fill="black" alignment-baseline="middle">master</text>
	</g>
</g>
	<circle class="ceb0874f" cx="20" cy="60" r="4" fill="#ff4a4a" stroke="#000000"/>
	<circle class="c052bb91" cx="55" cy="60" r="7" fill="#69ff4a" stroke="#000000"/>
<g class="commit_branches">
	<g>
<rect class="rect_branch" rx="5" ry="5" x="110" y="60" width="20" height="20" fill="#eeffe4" stroke="#307f00"/>
<text class="text_branch" x="110" y="60" fill="black" alignment-baseline="middle">feature</text>
	</g>
</g>
	<circle class="c3eb9f97" cx="90" cy="100" r="7" fill="#4a89ff" stroke="#000000"/>
<g class="commit_branches">
	<g>
<rect class="rect_branch" rx="5" ry="5" x="110" y="100" width="20" height="20" fill="#eeffe4" stroke="#307f00"/>
<text class="text_branch" x="110" y="100" fill="black" alignment-baseline="middle">some_branch</text>
	</g>
</g>
	<circle class="cadc7fe3" cx="55" cy="140" r="4" fill="#69ff4a" stroke="#000000"/>
	<circle class="c720ee10" cx="90" cy="140" r="4" fill="#4a89ff" stroke="#000000"/>
	<circle class="c8082d96" cx="20" cy="180" r="4" fill="#ff4a4a" stroke="#000000"/>
	<circle class="cf481257" cx="20" cy="220" r="4" fill="#ff4a4a" stroke="#000000"/>
        <g transform="translate(20,20)" class="commit_branches commit_g">
            <g class="c800831f">
                <rect x="20" y="-50" rx="5" width="200" height="20" fill="#d9e9ff" stroke="#005ac9"/>
                <text x="10" fill="black" alignment-baseline="hanging">800831f Merge branches 'feature' and 'some_branch' into master</text>
            </g>
        </g>

        <g transform="translate(20,60)" class="commit_branches commit_g">
            <g class="ceb0874f">
                <rect x="20" y="-50" rx="5" width="200" height="20" fill="#d9e9ff" stroke="#005ac9"/>
                <text x="10" fill="black" alignment-baseline="hanging">eb0874f master 3</text>
            </g>
        </g>

        <g transform="translate(55,60)" class="commit_branches commit_g">
            <g class="c052bb91">
                <rect x="20" y="-50" rx="5" width="200" height="20" fill="#d9e9ff" stroke="#005ac9"/>
                <text x="10" fill="black" alignment-baseline="hanging">052bb91 feature 2</text>
            </g>
        </g>

        <g transform="translate(90,100)" class="commit_branches commit_g">
            <g class="c3eb9f97">
                <rect x="20" y="-50" rx="5" width="200" height="20" fill="#d9e9ff" stroke="#005ac9"/>
                <text x="10" fill="black" alignment-baseline="hanging">3eb9f97 Merge branch 'feature' into some_branch</text>
            </g>
        </g>

        <g transform="translate(55,140)" class="commit_branches commit_g">
            <g class="cadc7fe3">
                <rect x="20" y="-50" rx="5" width="200" height="20" fill="#d9e9ff" stroke="#005ac9"/>
                <text x="10" fill="black" alignment-baseline="hanging">adc7fe3 feature 1</text>
            </g>
        </g>

        <g transform="translate(90,140)" class="commit_branches commit_g">
            <g class="c720ee10">
                <rect x="20" y="-50" rx="5" width="200" height="20" fill="#d9e9ff" stroke="#005ac9"/>
                <text x="10" fill="black" alignment-baseline="hanging">720ee10 some branch +</text>
            </g>
        </g>

        <g transform="translate(20,180)" class="commit_branches commit_g">
            <g class="c8082d96">
                <rect x="20" y="-50" rx="5" width="200" height="20" fill="#d9e9ff" stroke="#005ac9"/>
                <text x="10" fill="black" alignment-baseline="hanging">8082d96 master 2</text>
            </g>
        </g>

        <g transform="translate(20,220)" class="commit_branches commit_g">
            <g class="cf481257">
                <rect x="20" y="-50" rx="5" width="200" height="20" fill="#d9e9ff" stroke="#005ac9"/>
                <text x="10" fill="black" alignment-baseline="hanging">f481257 master 1</text>
            </g>
        </g>


</svg><script type="application/ecmascript">
 {
  let x = document.getElementsByClassName("commit_branches");


  for (let i = 0; i < x.length; i++) {
    let currentXDelta = -1;
    let groupNodes = x[i].querySelectorAll('g');
    for (let gNode = 0; gNode < groupNodes.length; gNode++) {
      let textNode = groupNodes[gNode].querySelector('text');
      let rectNode = groupNodes[gNode].querySelector('rect');
      if (!textNode || !rectNode)
        continue;
      if (currentXDelta < 0)
        currentXDelta = textNode.getAttribute("x");
      else
        textNode.setAttribute("x", currentXDelta);
      let f = textNode.getBBox();
      currentXDelta = f.x + f.width + 10;
      rectNode.setAttribute("width", f.width + 4);
      rectNode.setAttribute("height", f.height + 4);
      rectNode.setAttribute("x", f.x - 2);
      rectNode.setAttribute("y", f.y - 2);
    }
  }
}


{
  let x = document.getElementsByClassName("commit_g");


  for (let i = 0; i < x.length; i++) {
    let groupNode = x[i].querySelector('g');
    if (!groupNode)
      continue;

    let commitCircle = document.querySelector('.' + groupNode.classList[0]);
    if (!commitCircle)
      continue;

    commitCircle.addEventListener("mouseenter", function () {
      groupNode.classList.add("show_group");
    })

    commitCircle.addEventListener("mouseleave", function () {
      groupNode.classList.remove("show_group");
    })

    commitCircle.addEventListener("mouseup", function () {
      groupNode.classList.toggle("show_group_click");
    })

    groupNode.addEventListener("mouseup", function () {
      const selection = window.getSelection();
      if (!selection || selection.isCollapsed)
        groupNode.classList.toggle("show_group_click");
    })
  }
}</script>
<div>
    <h1>Look there, the same in text style!</h1>
    <p>
<code style="white-space: pre-wrap">
    ┏──╮──╮    0 800831f master
    ┿  │  │    1 eb0874f
    │  ┿  │    2 052bb91 feature
    │  ╭──╋    3 3eb9f97 some_branch
    │  ┿  │    4 adc7fe3
    │  │  ┿    5 720ee10
    ┿──╯──╯    6 8082d96
    ┷          7 f481257
</code>
</p>
</div>